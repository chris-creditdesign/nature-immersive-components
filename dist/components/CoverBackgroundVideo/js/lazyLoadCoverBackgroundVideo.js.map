{"version":3,"sources":["../../../../src/components/CoverBackgroundVideo/js/lazyLoadCoverBackgroundVideo.js"],"names":["lazyLoadCoverBackgroundVideo","root","rootMargin","videos","document","getElementsByClassName","videosArray","Array","from","window","observers","observerOptions","forEach","video","index","IntersectionObserver","intersectionCallback","observe","image"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA;;;;;;;;;;;;;AAaA,IAAMA,4BAA4B,GAAG,SAA/BA,4BAA+B,GAGhC;AAAA,MAFJC,IAEI,uEAFG,IAEH;AAAA,MADJC,UACI,uEADS,qBACT;AACJ;AACA,MAAMC,MAAM,GAAGC,QAAQ,CAACC,sBAAT,CACd,oCADc,CAAf;AAGA,MAAMC,WAAW,GAAGC,KAAK,CAACC,IAAN,CAAWL,MAAX,CAApB,CALI,CAOJ;;AACA,MAAI,0BAA0BM,MAA9B,EAAsC;AACrC,QAAMC,SAAS,GAAG,EAAlB;AAEA,QAAMC,eAAe,GAAG;AACvBV,MAAAA,IAAI,EAAJA,IADuB;AACjB;AACNC,MAAAA,UAAU,EAAVA,UAFuB,CAEX;;AAFW,KAAxB;AAKAI,IAAAA,WAAW,CAACM,OAAZ,CAAoB,UAACC,KAAD,EAAQC,KAAR,EAAkB;AACrCJ,MAAAA,SAAS,CAACI,KAAD,CAAT,GAAmB,IAAIC,oBAAJ,CAClBC,6BADkB,EAElBL,eAFkB,CAAnB;AAIAD,MAAAA,SAAS,CAACI,KAAD,CAAT,CAAiBG,OAAjB,CAAyBJ,KAAzB;AACA,KAND;AAOA,GAfD,MAeO;AACN;AACAP,IAAAA,WAAW,CAACM,OAAZ,CAAoB,UAAAM,KAAK;AAAA,aAAI,4BAAcA,KAAd,CAAJ;AAAA,KAAzB;AACA;AACD,CA9BD;;eAgCelB,4B","sourcesContent":["import intersectionCallback from \"./intersectionCallback\"\nimport enhanceVideos from \"./enhanceVideos\"\n\n/**\n * ## lazyLoadCoverBackgroundVideo\n *\n * Call `enhanceVideos` for elem with the class `js-lazyload-cover-background-video` on the page.\n *\n * 1. Create an array of all the videos\n * 2. If IntersectionObsverver is available, enhance each of the videos as they\n * come into view\n * 3. Otherwise, enhance them straight away\n *\n * @param {*} root\n * @param {*} rootMargin\n */\nconst lazyLoadCoverBackgroundVideo = (\n\troot = null,\n\trootMargin = \"600px 0px 600px 0px\"\n) => {\n\t// 1.\n\tconst videos = document.getElementsByClassName(\n\t\t\"js-lazyload-cover-background-video\"\n\t)\n\tconst videosArray = Array.from(videos)\n\n\t// 2.\n\tif (\"IntersectionObserver\" in window) {\n\t\tconst observers = []\n\n\t\tconst observerOptions = {\n\t\t\troot, // 3.\n\t\t\trootMargin, // 4.\n\t\t}\n\n\t\tvideosArray.forEach((video, index) => {\n\t\t\tobservers[index] = new IntersectionObserver(\n\t\t\t\tintersectionCallback,\n\t\t\t\tobserverOptions\n\t\t\t)\n\t\t\tobservers[index].observe(video)\n\t\t})\n\t} else {\n\t\t// 3.\n\t\tvideosArray.forEach(image => enhanceVideos(image))\n\t}\n}\n\nexport default lazyLoadCoverBackgroundVideo\n"],"file":"lazyLoadCoverBackgroundVideo.js"}