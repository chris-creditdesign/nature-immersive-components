{"version":3,"sources":["../../../../src/components/CoverBackgroundVideo/js/enhanceVideos.js"],"names":["updateButtonStatus","btn","video","innerText","paused","enhanceVideos","elem","classList","contains","img","querySelector","btnContainer","appendChild","source","src","replace","slice","alt","replaceChild","addEventListener","add"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;;;;;;AAMA,IAAMA,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,GAAD,EAAMC,KAAN,EAAgB;AAC1CD,EAAAA,GAAG,CAACE,SAAJ,GAAgBD,KAAK,CAACE,MAAN,GAAe,YAAf,GAA8B,aAA9C;AACA,CAFD;AAIA;;;;;;;;;;;;;;;;;;;;AAkBA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAAC,IAAI,EAAI;AAC7B;AACA,MAAIA,IAAI,CAACC,SAAL,CAAeC,QAAf,CAAwB,WAAxB,CAAJ,EAA0C,OAFb,CAI7B;;AACA,MAAMC,GAAG,GAAGH,IAAI,CAACI,aAAL,CAAmB,KAAnB,CAAZ,CAL6B,CAO7B;;AACA,MAAMT,GAAG,GAAG,2BAAa,YAAb,EAA2B,CACtC,KADsC,EAEtC,aAFsC,EAGtC,wBAHsC,EAItC,mBAJsC,CAA3B,CAAZ,CAR6B,CAe7B;;AACA,MAAMU,YAAY,GAAGL,IAAI,CAACI,aAAL,CAAmB,sBAAnB,CAArB;AACAC,EAAAA,YAAY,CAACC,WAAb,CAAyBX,GAAzB,EAjB6B,CAmB7B;;AACA,MAAMY,MAAM,GAAGJ,GAAG,CAACK,GAAJ,CAAQC,OAAR,CAAgB,QAAhB,EAA0B,EAA1B,EAA8BC,KAA9B,CAAoC,CAApC,EAAuC,CAAC,CAAxC,CAAf;AApB6B,MAqBrBC,GArBqB,GAqBbR,GArBa,CAqBrBQ,GArBqB,EAuB7B;;AACA,MAAMf,KAAK,GAAG,0BAAYW,MAAZ,EAAoBI,GAApB,CAAd;AACAX,EAAAA,IAAI,CAACY,YAAL,CAAkBhB,KAAlB,EAAyBO,GAAzB,EAzB6B,CA2B7B;;AACA,8BAAcP,KAAd,EA5B6B,CA8B7B;;AACAD,EAAAA,GAAG,CAACkB,gBAAJ,CAAqB,OAArB,EAA8B,YAAM;AACnC;AACAjB,IAAAA,KAAK,CAACA,KAAK,CAACE,MAAN,GAAe,MAAf,GAAwB,OAAzB,CAAL;AACAJ,IAAAA,kBAAkB,CAACC,GAAD,EAAMC,KAAN,CAAlB;AACA,GAJD,EA/B6B,CAqC7B;;AACAF,EAAAA,kBAAkB,CAACC,GAAD,EAAMC,KAAN,CAAlB,CAtC6B,CAwC7B;;AACAI,EAAAA,IAAI,CAACC,SAAL,CAAea,GAAf,CAAmB,WAAnB;AACA,CA1CD;;eA4Cef,a","sourcesContent":["import createVideo from \"./createVideo\"\nimport createButton from \"./createButton\"\nimport autoPlayVideo from \"./autoPlayVideo\"\n\n/**\n * ## updateButtonStatus\n *\n * Update the button to show 'play' or 'pause' with the\n * associated icon - depending on the state of the video\n */\nconst updateButtonStatus = (btn, video) => {\n\tbtn.innerText = video.paused ? \"Play video\" : \"Pause video\"\n}\n\n/**\n * ## enhanceVideos\n *\n * 1. Stop if the video has already been 'enhanced'.\n * 2. Find the image element\n * 3. Create the button element to stop and start the video\n * 4. Add the button to the page\n * 5. Get the source url, and alt text from the image element.\n * Remove the img extension ie .png or .jpg\n * 6. Create the video element and add it to the page,\n * replacing the figure.\n * 7. Attempt to autplay the video\n * 8. Add an event listener so the video can be played or paused by clicking on the button\n * 9. Set the status of the button, before its first click\n * 10. Add the `js-loaded` class so that img cannot be 'enhanced' again.\n *\n * @param {*} img The `img` element to be enhanced\n */\nconst enhanceVideos = elem => {\n\t// 1.\n\tif (elem.classList.contains(\"js-loaded\")) return\n\n\t// 2.\n\tconst img = elem.querySelector(\"img\")\n\n\t// 3.\n\tconst btn = createButton(\"Play video\", [\n\t\t\"box\",\n\t\t\"box--border\",\n\t\t\"font-family:sans-serif\",\n\t\t\"font-size:small-1\",\n\t])\n\n\t// 4.\n\tconst btnContainer = elem.querySelector(\".js-button-container\")\n\tbtnContainer.appendChild(btn)\n\n\t// 5.\n\tconst source = img.src.replace(/-small/, \"\").slice(0, -4)\n\tconst { alt } = img\n\n\t// 6.\n\tconst video = createVideo(source, alt)\n\telem.replaceChild(video, img)\n\n\t// 7.\n\tautoPlayVideo(video)\n\n\t// 8.\n\tbtn.addEventListener(\"click\", () => {\n\t\t// If the video.paused is true call the play method and visa-versa\n\t\tvideo[video.paused ? \"play\" : \"pause\"]()\n\t\tupdateButtonStatus(btn, video)\n\t})\n\n\t// 9.\n\tupdateButtonStatus(btn, video)\n\n\t// 10.\n\telem.classList.add(\"js-loaded\")\n}\n\nexport default enhanceVideos\n"],"file":"enhanceVideos.js"}