{"version":3,"sources":["../../../../src/components/ImageBasic/js/lazyLoadImageBasic.js"],"names":["lazyloadImageBasic","root","rootMargin","images","document","getElementsByClassName","imagesArray","Array","from","HTMLImageElement","prototype","forEach","image","window","observers","observerOptions","index","IntersectionObserver","intersectionCallback","observe"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA;;;;;;;;;;;;;;AAcA,IAAMA,kBAAkB,GAAG,SAArBA,kBAAqB,GAGtB;AAAA,MAFJC,IAEI,uEAFG,IAEH;AAAA,MADJC,UACI,uEADS,qBACT;AACJ,MAAMC,MAAM,GAAGC,QAAQ,CAACC,sBAAT,CAAgC,uBAAhC,CAAf;AACA,MAAMC,WAAW,GAAGC,KAAK,CAACC,IAAN,CAAWL,MAAX,CAApB;;AAEA,MAAI,aAAaM,gBAAgB,CAACC,SAAlC,EAA6C;AAC5C;AACAJ,IAAAA,WAAW,CAACK,OAAZ,CAAoB,UAAAC,KAAK;AAAA,aAAI,4BAAcA,KAAd,CAAJ;AAAA,KAAzB;AACA,GAHD,MAGO,IAAI,0BAA0BC,MAA9B,EAAsC;AAC5C;AACA,QAAMC,SAAS,GAAG,EAAlB;AAEA,QAAMC,eAAe,GAAG;AACvBd,MAAAA,IAAI,EAAJA,IADuB;AACjB;AACNC,MAAAA,UAAU,EAAVA,UAFuB,CAEX;;AAFW,KAAxB;AAKAI,IAAAA,WAAW,CAACK,OAAZ,CAAoB,UAACC,KAAD,EAAQI,KAAR,EAAkB;AACrCF,MAAAA,SAAS,CAACE,KAAD,CAAT,GAAmB,IAAIC,oBAAJ,CAClBC,6BADkB,EAElBH,eAFkB,CAAnB;AAIAD,MAAAA,SAAS,CAACE,KAAD,CAAT,CAAiBG,OAAjB,CAAyBP,KAAzB;AACA,KAND;AAOA,GAhBM,MAgBA;AACN;AACAN,IAAAA,WAAW,CAACK,OAAZ,CAAoB,UAAAC,KAAK;AAAA,aAAI,4BAAcA,KAAd,CAAJ;AAAA,KAAzB;AACA;AACD,CA9BD;;eAgCeZ,kB","sourcesContent":["import enhanceImages from \"./enhanceImages\"\nimport intersectionCallback from \"./intersectionCallback\"\n\n/**\n * ## lazyloadImages\n *\n * Call `enhanceImages` for each `img[loading=\"lazy\"]` on the page.\n *\n * 1. The images can natively lazyload, so no need for the IntersectionObserver.\n * Call `enhanceImages` straight away.\n * 2. Use IntersectionObserver to load the images when they move into the viewport.\n * 3. The viewport is the root by default.\n * 4. Start loading the image when it is 600px above or below the viewport\n * 5. No lazy loading options are available so pop all the high res images onto the page.\n * @param {*} root\n * @param {*} rootMargin\n */\nconst lazyloadImageBasic = (\n\troot = null,\n\trootMargin = \"600px 0px 600px 0px\"\n) => {\n\tconst images = document.getElementsByClassName(\"js-lazyload-img-basic\")\n\tconst imagesArray = Array.from(images)\n\n\tif (\"loading\" in HTMLImageElement.prototype) {\n\t\t// 1.\n\t\timagesArray.forEach(image => enhanceImages(image))\n\t} else if (\"IntersectionObserver\" in window) {\n\t\t// 2.\n\t\tconst observers = []\n\n\t\tconst observerOptions = {\n\t\t\troot, // 3.\n\t\t\trootMargin, // 4.\n\t\t}\n\n\t\timagesArray.forEach((image, index) => {\n\t\t\tobservers[index] = new IntersectionObserver(\n\t\t\t\tintersectionCallback,\n\t\t\t\tobserverOptions\n\t\t\t)\n\t\t\tobservers[index].observe(image)\n\t\t})\n\t} else {\n\t\t// 5.\n\t\timagesArray.forEach(image => enhanceImages(image))\n\t}\n}\n\nexport default lazyloadImageBasic\n"],"file":"lazyLoadImageBasic.js"}